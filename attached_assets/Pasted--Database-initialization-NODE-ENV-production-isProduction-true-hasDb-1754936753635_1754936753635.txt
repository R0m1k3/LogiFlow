    
🔗 Database initialization: {

  NODE_ENV: 'production',

  isProduction: true,

  hasDbUrl: true,

  dbHost: 'logiflow-db'

}

🐳 PRODUCTION: Using standard PostgreSQL

✅ PostgreSQL connection test successful

🐳 PRODUCTION: Using PostgreSQL storage

🐳 PRODUCTION: Local auth configured with PostgreSQL sessions

🐳 PRODUCTION: Starting LogiFlow application

🐳 Environment: { NODE_ENV: 'production', DATABASE_URL: 'Present', PORT: '3000' }

🔍 Using development storage and authentication

🔧 Using memory session store for development

Warning: connect.session() MemoryStore is not

designed for a production environment, as it will leak

memory, and will not scale past a single process.

🐳 Serving static files from: /app/dist/public

🐳 PRODUCTION: LogiFlow serving on port 3000

✅ Production admin user found: { id: 'admin_local', username: 'admin', passwordFormat: 'present' }

🔐 Production password comparison { suppliedLength: 5, storedFormat: '63d2ce518b...' }

✅ Password matched with hash.salt format

✅ Admin password works with current system

HEAD /api/health 200 in 5ms

Error updating user: error: duplicate key value violates unique constraint "users_email_key"

    at /app/node_modules/pg-pool/index.js:45:11

    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

    at async file:///app/node_modules/drizzle-orm/node-postgres/session.js:83:22

    at async DatabaseStorage.updateUser (file:///app/dist/index.js:1085:24)

    at async file:///app/dist/index.js:4051:27 {

  length: 210,

  severity: 'ERROR',

  code: '23505',

  detail: 'Key (email)=(admin@logiflow.com) already exists.',

  hint: undefined,

  position: undefined,

  internalPosition: undefined,

  internalQuery: undefined,

  where: undefined,

  schema: 'public',

  table: 'users',

  column: undefined,

  dataType: undefined,

  constraint: 'users_email_key',

  file: 'nbtinsert.c',

  line: '664',

  routine: '_bt_check_unique'

}

PUT /api/users/_1754936203292 500 in 96ms

HEAD /api/health 200 in 1ms

HEAD /api/health 200 in 0ms

HEAD /api/health 200 in 1ms

HEAD /api/health 200 in 1ms

HEAD /api/health 200 in 1ms

HEAD /api/health 200 in 16ms

HEAD /api/health 200 in 1ms

HEAD /api/health 200 in 4ms

HEAD /api/health 200 in 1ms

HEAD /api/health 200 in 1ms

HEAD /api/health 200 in 1ms

HEAD /api/health 200 in 1ms

HEAD /api/health 200 in 1ms

HEAD /api/health 200 in 1ms

HEAD /api/health 200 in 1ms

HEAD /api/health 200 in 3ms

Error updating user: error: duplicate key value violates unique constraint "users_email_key"

    at /app/node_modules/pg-pool/index.js:45:11

    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

    at async file:///app/node_modules/drizzle-orm/node-postgres/session.js:83:22

    at async DatabaseStorage.updateUser (file:///app/dist/index.js:1085:24)

    at async file:///app/dist/index.js:4051:27 {

  length: 210,

  severity: 'ERROR',

  code: '23505',

  detail: 'Key (email)=(admin@logiflow.com) already exists.',

  hint: undefined,

  position: undefined,

  internalPosition: undefined,

  internalQuery: undefined,

  where: undefined,

  schema: 'public',

  table: 'users',

  column: undefined,

  dataType: undefined,

  constraint: 'users_email_key',

  file: 'nbtinsert.c',

  line: '664',

  routine: '_bt_check_unique'

}

PUT /api/users/_1754936203292 500 in 44ms

HEAD /api/health 200 in 1ms