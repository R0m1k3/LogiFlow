
      
GET /api/user 304 in 102ms

Customer Orders API called with: { groupIds: undefined, userRole: 'admin' }

ðŸ“Š Calcul statistiques mensuelles: {

  year: 2025,

  month: 8,

  startDate: '2025-08-01',

  endDate: '2025-09-01',

  groupIds: undefined

}

Deliveries API called with: {

  startDate: undefined,

  endDate: undefined,

  storeId: undefined,

  withBL: undefined,

  userRole: 'admin'

}

Admin filtering deliveries with groupIds: undefined

Fetching all deliveries

Tasks API called with: { groupIds: undefined, userRole: 'admin' }

ðŸ”— PRODUCTION: getOrders() rÃ©cupÃ©rÃ© 49 commandes avec relations

Orders returned: 49 items

GET /api/dlc-products/stats 304 in 181ms

GET /api/orders 200 in 188ms

Customer Orders returned: 34 items

GET /api/customer-orders 200 in 192ms

GET /api/publicities 304 in 188ms

ðŸ“Š Statistiques calculÃ©es: {

  ordersCount: 18,

  deliveriesCount: 42,

  pendingOrdersCount: 5,

  averageDeliveryTime: 0.3611111111111111,

  totalPalettes: 120,

  totalPackages: 36

}

Tasks returned: 61 items

GET /api/stats/monthly 200 in 229ms

GET /api/tasks 304 in 221ms

GET /api/user 304 in 28ms

ðŸ”— PRODUCTION: getDeliveries() rÃ©cupÃ©rÃ© 82 livraisons avec relations

Deliveries returned: 82 items

GET /api/deliveries 200 in 282ms

Deliveries API called with: {

  startDate: undefined,

  endDate: undefined,

  storeId: '2',

  withBL: undefined,

  userRole: 'admin'

}

Admin filtering deliveries with groupIds: [ 2 ]

Fetching all deliveries

Orders API called with: {

  startDate: undefined,

  endDate: undefined,

  storeId: '2',

  userRole: 'admin'

}

Admin filtering with groupIds: [ 2 ]

Fetching all orders

Customer Orders API called with: { groupIds: [ 2 ], userRole: 'admin' }

ðŸ”— PRODUCTION: getDeliveries() rÃ©cupÃ©rÃ© 38 livraisons avec relations

Deliveries returned: 38 items

GET /api/deliveries 304 in 67ms

Customer Orders returned: 25 items

GET /api/customer-orders 200 in 63ms

ðŸ”— PRODUCTION: getOrders() rÃ©cupÃ©rÃ© 18 commandes avec relations

Orders returned: 18 items

GET /api/orders 304 in 63ms

GET /api/groups 304 in 6ms

GET /api/publicities 304 in 17ms

GET /api/user 304 in 6ms

GET /api/suppliers 304 in 12ms

GET /api/sav/stats 304 in 21ms

GET /api/sav/tickets 304 in 26ms

HEAD /api/health 200 in 1ms

POST /api/sav/tickets 500 in 17ms

Error creating SAV ticket: error: new row for relation "sav_ticket_history" violates check constraint "chk_sav_history_action"

    at /app/node_modules/pg-pool/index.js:45:11

    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

    at async file:///app/node_modules/drizzle-orm/node-postgres/session.js:83:22

    at async DatabaseStorage.addSavTicketHistory (file:///app/dist/index.js:2040:27)

    at async DatabaseStorage.createSavTicket (file:///app/dist/index.js:2013:9)

    at async file:///app/dist/index.js:6154:22 {

  length: 336,

  severity: 'ERROR',

  code: '23514',

  detail: 'Failing row contains (32, 11, ticket_created, Ticket crÃ©Ã© avec le statut "nouveau", admin_local, 2025-08-14 10:22:10.723558).',

  hint: undefined,

  position: undefined,

  internalPosition: undefined,

  internalQuery: undefined,

  where: undefined,

  schema: 'public',

  table: 'sav_ticket_history',

  column: undefined,

  dataType: undefined,

  constraint: 'chk_sav_history_action',

  file: 'execMain.c',

  line: '2023',

  routine: 'ExecConstraints'